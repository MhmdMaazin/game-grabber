(()=>{var e={};e.id=282,e.ids=[282],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},6353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>g});var a=r(2706),o=r(8203),i=r(5994),n=r(9187),p=r(5710);let l=new Map;function u(e,t){let r=[...e];if(t.search){let e=String(t.search).toLowerCase();r=r.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}return"date"===t.sort?r.sort((e,t)=>new Date(t.published_date).getTime()-new Date(e.published_date).getTime()):"value"===t.sort?r.sort((e,t)=>{let r=parseFloat(e.worth.replace("$","").replace("N/A","0"));return parseFloat(t.worth.replace("$","").replace("N/A","0"))-r}):"popularity"===t.sort&&r.sort((e,t)=>t.users-e.users),r}async function g(e){try{let t=new URL(e.url),r=p.K_.parse(Object.fromEntries(t.searchParams.entries())),s=JSON.stringify(r),a=l.get(s);if(a&&Date.now()-a.timestamp<3e5){let e=u(a.data,r);return n.NextResponse.json(e,{headers:{"Access-Control-Allow-Origin":"*"}})}let o="https://www.gamerpower.com/api/giveaways",i=new URLSearchParams;r.platform&&"all"!==r.platform&&i.append("platform",{steam:"steam","epic-games-store":"epic-games-store",gog:"gog",ubisoft:"ubisoft",origin:"origin"}[r.platform]||r.platform),r.type&&"all"!==r.type&&i.append("type",r.type),"value"===r.sort?i.append("sort-by","value"):"popularity"===r.sort&&i.append("sort-by","popularity"),i.toString()&&(o+=`?${i.toString()}`);let g=await fetch(o,{headers:{"User-Agent":"Game Grabber Giveaway Tracker"}});if(!g.ok)throw Error(`GamerPower API error: ${g.status}`);let d=await g.json();if(!Array.isArray(d)){if(d.status_code)throw Error(`API Error: ${d.error_message||"Unknown error"}`);return n.NextResponse.json([],{status:500})}let c=p.nW.parse(d);l.set(s,{data:c,timestamp:Date.now()});let m=u(c,r);return n.NextResponse.json(m,{headers:{"Access-Control-Allow-Origin":"*"}})}catch(e){return n.NextResponse.json({error:"Failed to fetch giveaways",message:e?.message||"Unknown error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/giveaways/route",pathname:"/api/giveaways",filename:"route",bundlePath:"app/api/giveaways/route"},resolvedPagePath:"E:\\GameGrabber\\app\\api\\giveaways\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:m,serverHooks:w}=d;function y(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{},5710:(e,t,r)=>{"use strict";r.d(t,{K_:()=>i,nW:()=>o,zd:()=>a});var s=r(379);let a=s.z.object({id:s.z.number(),title:s.z.string(),worth:s.z.string(),thumbnail:s.z.string(),image:s.z.string(),description:s.z.string(),instructions:s.z.string().optional(),open_giveaway_url:s.z.string().optional(),published_date:s.z.string(),type:s.z.string(),platforms:s.z.string(),end_date:s.z.string().nullable(),users:s.z.number(),status:s.z.string(),gamerpower_url:s.z.string(),open_giveaway:s.z.string().optional()}),o=s.z.array(a),i=s.z.object({platform:s.z.string().optional(),type:s.z.string().optional(),sort:s.z.enum(["date","value","popularity"]).optional(),search:s.z.string().optional()})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,452,379],()=>r(6353));module.exports=s})();